"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["ui_packages_conversations_conversations_ts-ui_packages_copy-to-clipboard_CopyToClipboardButton_tsx"],{82431:(e,t,n)=>{n.d(t,{Su:()=>o.S,dE:()=>P,c7:()=>M,UA:()=>$.U,yF:()=>z,cT:()=>X,i4:()=>Q.i,L4:()=>Y.L});var i=n(22025);n(80765);var o=n(97745),r=n(74848),a=n(73218),l=n(85349),s=n(75177),d=n(63867),c=n(16255),m=n(96540),u=n(56126),h=n(38621),f=n(87330),g=n(33563),p=n(52464);function x({markerId:e,markers:t}){let n=t.findIndex(t=>t.id===e);return(0,r.jsxs)(p.A,{sx:{color:"fg.muted"},children:[(0,r.jsx)(p.A,{sx:{fontWeight:500,color:"fg.default"},children:n+1})," of"," ",(0,r.jsx)(p.A,{sx:{fontWeight:500,color:"fg.default"},children:t.length})]})}function y({markerId:e,markerNavigationImplementation:t,onNavigate:n}){let{incrementActiveMarker:i,decrementActiveMarker:o,filteredMarkers:a}=t;return a.find(t=>t.id===e)&&a.length>1?(0,r.jsxs)(s.A,{sx:{pr:1,display:"flex",flexDirection:"row",alignItems:"center"},children:[(0,r.jsx)(f.K,{unsafeDisableTooltip:!0,"aria-label":"Load previous marker",icon:h.ChevronLeftIcon,variant:"invisible",onClick:()=>{o(e),n()}}),(0,r.jsx)(f.K,{unsafeDisableTooltip:!0,"aria-label":"Load next marker",icon:h.ChevronRightIcon,variant:"invisible",onClick:()=>{i(e),n()}}),(0,r.jsx)(s.A,{sx:{ml:1},children:(0,r.jsx)(x,{markerId:e,markers:a})})]}):null}try{x.displayName||(x.displayName="MarkerPosition")}catch{}try{y.displayName||(y.displayName="GlobalMarkerNavigation")}catch{}function b({annotation:e,markerNavigationImplementation:t,onClose:n}){return(0,r.jsxs)(s.A,{sx:{width:"clamp(240px, 100vw, 540px)"},children:[(0,r.jsx)(s.A,{sx:{borderBottom:"1px solid",borderBottomColor:"border.default",display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",p:1,background:"canvas.default"},children:(0,r.jsxs)(s.A,{sx:{display:"flex",flexDirection:"row",width:"100%",alignItems:"center"},children:[(0,r.jsx)(y,{markerId:e.id,markerNavigationImplementation:t,onNavigate:n}),(0,r.jsx)(s.A,{sx:{display:"flex",flexDirection:"row",gap:1,alignItems:"center",justifyContent:"right",flexGrow:1},children:(0,r.jsx)(f.K,{unsafeDisableTooltip:!0,"aria-label":"Close annotation",icon:h.XIcon,variant:"invisible",onClick:n})})]})}),(0,r.jsx)(g.Y,{annotation:e})]})}try{b.displayName||(b.displayName="AnnotationDialog")}catch{}var C=n(52655),j=n(62456),v=n(89323),N=n(15385),S=n(30729),T=n(82126);function A({anchorRef:e,annotations:t,handleOpenChange:n,threads:i,onShowAnnotation:o,onShowCommentThread:a,ghostUser:l=C.t.ghostUser}){function d(e){return{display:"-webkit-box",overflow:"hidden","-webkit-box-orient":"vertical","-webkit-line-clamp":e.toString(),maxWidth:"unset"}}return(0,r.jsx)(v.W,{anchorRef:e,open:!0,onOpenChange:n,children:(0,r.jsx)(v.W.Overlay,{width:"small",children:(0,r.jsx)("div",{children:(0,r.jsxs)(N.l,{children:[t.map(e=>(0,r.jsxs)(N.l.Item,{onSelect:()=>o(e.id),children:[(0,r.jsx)(N.l.LeadingVisual,{sx:{mr:2},children:(0,r.jsx)(T.Xh,{annotationLevel:e.annotationLevel},e.id)}),(0,r.jsxs)(s.A,{sx:{...d(2)},children:[e.checkSuiteName," /"," ",(0,r.jsx)(p.A,{sx:{fontWeight:400,color:"fg.muted"},children:e.checkRun.name})]}),(0,r.jsx)(N.l.Description,{variant:"block",children:(0,r.jsx)(s.A,{sx:{...d(1)},children:e.title})}),(0,r.jsx)(N.l.TrailingVisual,{children:(0,r.jsx)(S.A,{icon:h.ArrowRightIcon})})]},e.id)),i.map(e=>(0,r.jsxs)(N.l.Item,{onSelect:()=>a(e.id),children:[(0,r.jsx)(N.l.LeadingVisual,{sx:{mr:2},children:(0,r.jsx)(j.r,{alt:e.author.login,size:20,src:e.author.avatarUrl??l.avatarUrl})}),"Thread by ",e.author.login,(0,r.jsxs)(N.l.Description,{variant:"block",children:[e.commentCount," comment",e.commentCount>1?"s":""]}),(0,r.jsx)(N.l.TrailingVisual,{children:(0,r.jsx)(S.A,{icon:h.ArrowRightIcon})})]},e.id))]})})})})}try{A.displayName||(A.displayName="MarkersListActionMenu")}catch{}var E=n(67136),I=n(70404),D=n(47139),L=n(42522),_=n(94493);function R({children:e}){return(0,r.jsx)(p.A,{sx:{fontWeight:500,color:"fg.default"},children:e})}function w({thread:e}){return void 0!==e&&e?.diffSide&&e.line?e.startLine&&e.startDiffSide?O({thread:e}):k({thread:e}):null}function k({thread:e}){let t="LEFT"===e.startDiffSide?"L":"R";return(0,r.jsxs)(p.A,{sx:{color:"fg.muted",pl:2},children:["Comment on lines"," ",(0,r.jsxs)(R,{children:[t,e.line]})]})}function O({thread:e}){let t="LEFT"===e.startDiffSide?"L":"R",n="LEFT"===e.diffSide?"L":"R";return(0,r.jsxs)(p.A,{sx:{color:"fg.muted",pl:2},children:["Comment on lines"," ",(0,r.jsxs)(R,{children:[t,e.startLine]})," ","to"," ",(0,r.jsxs)(R,{children:[n,e.line]})]})}function U({commentingImplementation:e,filePath:t,onClose:n,onRefreshThread:i,thread:o,threads:a,threadsConnectionId:l,markerNavigationImplementation:c,ghostUser:u,...g}){let{sendAnalyticsEvent:p}=(0,I.s)(),{resolveThread:x,unresolveThread:b,resolvingEnabled:C}=e,j=a.find(e=>e.id===o.id),v=o.commentsData.comments.length>0,N=!!o.isResolved,{addToast:S}=(0,E.Y6)(),T=j?.commentsConnectionId;return v?(0,r.jsxs)("div",{children:[(0,r.jsx)(s.A,{sx:{borderBottom:"1px solid",borderBottomColor:"border.default",display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",p:1,background:"canvas.default"},children:(0,r.jsxs)(s.A,{sx:{display:"flex",flexDirection:"row",width:"100%",alignItems:"center"},children:[(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(y,{markerId:o.id,markerNavigationImplementation:c,onNavigate:n}),(0,r.jsx)(w,{thread:j})]}),(0,r.jsxs)(s.A,{sx:{display:"flex",flexDirection:"row",gap:1,alignItems:"center",justifyContent:"right",flexGrow:1},children:[N&&(0,r.jsx)(D.A,{variant:"done",size:"large",children:"Resolved"}),C&&(0,r.jsx)(L.m,{text:N?"Unresolve conversation":"Resolve conversation",type:"label",direction:"w",id:"resolve-conversation",children:(0,r.jsx)(f.K,{"aria-labelledby":"resolve-conversation",unsafeDisableTooltip:!0,icon:N?h.CheckCircleFillIcon:h.CheckCircleIcon,sx:{color:N?"var(--fgColor-done, var(--color-done-fg)) !important":void 0},variant:"invisible",onClick:N?()=>{b({threadId:o.id,onCompleted:()=>i(o.id),onError:()=>{S({type:"error",message:"Failed to unresolve thread"})}}),p("comments.unresolve_thread","RESOLVE_CONVERSATION_BUTTON")}:()=>{x({threadId:o.id,onCompleted:()=>i(o.id),onError:()=>{S({type:"error",message:"Failed to resolve thread"})}}),p("comments.resolve_thread","RESOLVE_CONVERSATION_BUTTON")}})}),(0,r.jsx)(f.K,{unsafeDisableTooltip:!0,"aria-label":"Close thread",icon:h.XIcon,variant:"invisible",onClick:n})]})]})}),(0,r.jsx)(m.Suspense,{fallback:(0,r.jsxs)(s.A,{sx:{height:"90px",alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",color:"fg.muted",fontSize:0},children:[(0,r.jsx)(d.A,{}),(0,r.jsx)("p",{children:"Loading comments"})]}),children:(0,r.jsx)(_.H,{commentingImplementation:e,commentsConnectionId:T,filePath:t,onRefreshThread:i,thread:o,threadsConnectionId:l,...g,ghostUser:u})})]}):null}try{R.displayName||(R.displayName="Emphasis")}catch{}try{w.displayName||(w.displayName="ThreadBanner")}catch{}try{k.displayName||(k.displayName="SingleLineThreadBanner")}catch{}try{O.displayName||(O.displayName="MultineLineThreadBanner")}catch{}try{U.displayName||(U.displayName="ReviewThreadDialog")}catch{}function M(e){return(0,r.jsx)(u.j,{children:(0,r.jsx)(B,{...e})})}function B({annotations:e,commentingImplementation:t,conversationAnchorRef:n,conversationListAnchorRef:i,conversationListThreads:o,isMarkerListOpen:c,fileAnchor:h,filePath:f,onAnnotationSelected:g,onCloseConversationDialog:p,onCloseConversationList:x,onThreadSelected:y,returnFocusRef:C,selectedAnnotationId:j,selectedThreadId:v,threadsConnectionId:N,markerNavigationImplementation:S,suggestedChangesConfig:T,ghostUser:E,...I}){let{isDialogOpen:D}=(0,u.W)(),[L,_]=(0,m.useState)(),{fetchThread:R}=t,w=(0,m.useCallback)(()=>!D&&p(),[D,p]),k=async e=>{_(void 0);let t=o.find(t=>t.id===e)?.isOutdated;_(await R(e,t))},O=(0,m.useMemo)(()=>{if(h&&L&&L.subject?.startDiffSide&&L.subject?.endDiffSide&&L.subject?.startLine&&L.subject?.endLine&&T?.configureSuggestedChangesFromLineRange){let e=L.subject?.startLine??L?.subject?.endLine,t=L.subject?.startDiffSide??L?.subject?.endDiffSide,n={diffAnchor:h,endLineNumber:L?.subject?.endLine,endOrientation:L.subject?.endDiffSide==="LEFT"?"left":"right",startLineNumber:e,firstSelectedLineNumber:e,firstSelectedOrientation:"LEFT"===t?"left":"right",startOrientation:"LEFT"===t?"left":"right"};return T?.configureSuggestedChangesFromLineRange(n)}},[h,L,T]);(0,m.useEffect)(()=>{!v&&L?_(void 0):v&&v!==L?.id&&k(v)},[R,v]);let M=v||j,B=j?e.find(e=>e.id===j):void 0;return(0,r.jsx)(r.Fragment,{children:M?(0,r.jsx)(l.T,{align:"end",anchorRef:n,focusZoneSettings:{disabled:!0},open:!0,focusTrapSettings:{disabled:!0},renderAnchor:null,overlayProps:{"aria-label":`${v?"Pull Request Review Thread":"Pull Request Check Annotation"}`,id:"conversation-dialog",returnFocusRef:C,role:"dialog",width:"xlarge",preventOverflow:!1,sx:{borderRadius:2},onClickOutside:a.l,onKeyDown:e=>{"Escape"!==e.key&&e.stopPropagation()},portalContainerName:S.overlayPortalContainerName},onClose:w,children:L?(0,r.jsx)(U,{commentingImplementation:t,filePath:f,thread:L,threads:o,threadsConnectionId:N,onClose:w,onThreadSelected:y,onRefreshThread:k,markerNavigationImplementation:S,suggestedChangesConfig:O,ghostUser:E,...I}):B?(0,r.jsx)(b,{annotation:B,markerNavigationImplementation:S,onClose:w}):(0,r.jsxs)(s.A,{sx:{height:"90px",alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",color:"fg.muted",fontSize:0},children:[(0,r.jsx)(d.A,{}),(0,r.jsx)("p",{children:"Loading comments"})]})}):c&&(0,r.jsx)(A,{anchorRef:i,annotations:e,handleOpenChange:x,threads:o,onShowCommentThread:y,onShowAnnotation:g,ghostUser:E})})}function P({id:e}){let t=(0,m.useRef)(null);return(0,m.useEffect)(()=>{t.current&&(0,c.c)(t.current,e)},[e]),(0,r.jsx)("span",{id:e,ref:t,style:{position:"absolute",top:0,right:0,zIndex:10}})}try{M.displayName||(M.displayName="Markers")}catch{}try{B.displayName||(B.displayName="MarkersInternal")}catch{}try{P.displayName||(P.displayName="MarkerPortalRoot")}catch{}var $=n(8187),H=n(81874),F=n(77433),G=n(44968),V=n(47584),W=n(93345);function z({isAnchorable:e=!1,index:t=0,isLastChild:n,anchorPrefix:i="r",comment:o,commentingImplementation:l,filePath:d,hideActions:c,enterDialogMode:u=a.l,onRefreshThread:h,onQuoteReply:f=a.l,threadCommentCount:g,threadId:p,threadsConnectionId:x,ghostUser:y=C.t.ghostUser}){let{addToast:b}=(0,E.Y6)(),[j,v]=(0,m.useState)(!1),[N,S]=(0,m.useState)(o.isHidden),[T,A]=(0,m.useState)(!1),{deleteComment:I,hideComment:D,unhideComment:L}=l,_=(0,m.useRef)(null),R=(0,m.useRef)(null),w=()=>{_.current?.focus()};(0,m.useEffect)(()=>{if(j){let e=window.setTimeout(w);return()=>{window.clearTimeout(e)}}},[j]);let k=o.currentDiffResourcePath?.split("#r").pop(),O=k?`${i}${k}`:void 0,U=O&&V.fV?new URL(`${V.fV.pathname}#${O}`,V.fV.origin).toString():void 0,M=(0,m.useRef)(null);(0,m.useEffect)(()=>{e&&k&&O&&window.location.hash.split("#").pop()===O&&((0,W.p)(k,i),u?.(!1),M.current?.focus())},[i,O,k,u,e]);let B={outline:"2px solid",outlineColor:"accent.fg",outlineOffset:"-2px",boxShadow:"none"},P=t>0,$=t>1,z={headingProps:{as:"h3"},avatarUrl:o.author?.avatarUrl??y.avatarUrl,comment:{...o,url:U??"",referenceText:o.reference.text??`#${o.reference.number}`},commentRef:M,deleteComment:()=>{I({commentId:o.id,onCompleted:()=>{h?.(p)},onError:()=>{A(!1),b({type:"error",message:"Failed to delete comment"})},threadCommentCount:g,threadId:p,threadsConnectionId:x,filePath:d})},editComment:()=>{v(!0)},editHistoryComponent:void 0,hideComment:e=>{D({commentDatabaseId:o.databaseId,reason:e,onCompleted:()=>{h?.(p)},onError:()=>{A(!1),b({type:"error",message:"Failed to hide comment"})}})},onMinimize:S,isMinimized:N,commentAuthorLogin:o.author?.login??y.login,navigate:a.l,commentSubjectAuthorLogin:o.reference?.author?.login??"",commentSubjectType:l.commentSubjectType,onReplySelect:f,unhideComment:()=>{L({commentDatabaseId:o.databaseId,onCompleted:()=>{h?.(p)},onError:()=>{A(!1),b({type:"error",message:"Failed to unhide comment"})}})},hideActions:c,isReply:P,forceInlineAvatar:!0,containerStyle:{}};return(0,r.jsxs)(s.A,{ref:M,id:e?O:void 0,tabIndex:-1,sx:{"&:not(:first-child)":{backgroundColor:"canvas.inset"},"&:first-child + div":{borderTop:"1px solid",borderColor:"border.muted"},":target":B,":focus":B,pb:P?0:2},children:[$&&(0,r.jsx)(s.A,{sx:{display:"flex",pl:P?1:0},children:(0,r.jsx)(s.A,{sx:{ml:4,height:8,borderLeft:"1px solid",borderColor:"border.default"}})}),(0,r.jsx)(s.A,{sx:{px:3,pt:$?0:2,pb:0},children:(0,r.jsx)(H.v,{...z,actions:c?void 0:(0,r.jsx)(F.p,{...z})})}),(0,r.jsxs)(s.A,{sx:{display:"flex",pl:P?1:0},children:[P&&(0,r.jsx)(s.A,{sx:{ml:4,mr:1,pl:3,borderLeft:"1px solid",borderColor:"border.default",...n&&{borderImage:"linear-gradient(to bottom, var(--borderColor-default, var(--color-border-default)), rgba(0, 0, 0, 0)) 1 100%"}}}),(0,r.jsx)(s.A,{sx:P?{pb:2,pr:2,overflowX:"auto",width:"100%"}:{px:3,pb:2,width:"100%"},children:o.bodyHTML&&(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(G.oG,{ref:R,className:"markdown-body","comment-testid":`Comment body html for comment ${o.id}`,html:o.bodyHTML,sx:{mt:1,fontSize:1}})})})]})]})}try{z.displayName||(z.displayName="ReviewThreadCommentWithoutReactions")}catch{}var q=n(84217);function K({addCommentDialogTitle:e,isLeftSide:t,filePath:n,lineNumber:o,onAddComment:a,onClose:l,viewerData:d,threadsConnectionId:c,showOnCloseIcon:m=!0,...u}){return(0,r.jsxs)(s.A,{sx:{px:2,pb:2,pt:1},children:[(0,r.jsxs)(s.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,r.jsxs)(q.A,{as:"h4",className:"f5 ml-1 pt-1 pb-2",children:[(0,r.jsx)(j.r,{alt:d.login,size:24,src:d.avatarUrl||"",sx:{mr:2}}),(0,r.jsx)("span",{children:e??"Add a comment"})]}),l&&m&&(0,r.jsx)(f.K,{unsafeDisableTooltip:!0,variant:"invisible",icon:h.XIcon,onClick:l,"aria-label":"Cancel"})]}),(0,r.jsx)(i.U,{focusOnMount:!0,condensed:!1,fileLevelComment:!1,filePath:n,lineNumber:o,onAddComment:({commentText:e,onCompleted:t,onError:i,submitBatch:o})=>{a({text:e,onError:i,onCompleted:(e,n)=>{n&&(0,W.p)(n.toString()),t?.(e,n)},submitBatch:o,filePath:n,threadsConnectionId:c})},onCancelComment:l,side:t?"LEFT":"RIGHT",...u})]})}try{K.displayName||(K.displayName="StartThreadComment")}catch{}function X({align:e="end",anchorRef:t,isOpen:n,isDialog:i=!0,returnFocusRef:o,onCloseCommentDialog:s,suggestedChangesConfig:d,...c}){let{sendAnalyticsEvent:u}=(0,I.s)(),h=(0,m.useMemo)(()=>{if(n&&d?.configureSuggestedChangesFromLineRange)return d.configureSuggestedChangesFromLineRange(d?.selectedDiffRowRange,d?.shouldStartNewConversationWithSuggestedChange)},[n,d]);return n?i?(0,r.jsx)(l.T,{align:e,anchorRef:t,focusZoneSettings:{disabled:!0},open:n,renderAnchor:null,focusTrapSettings:{disabled:!0},overlayProps:{id:"conversation-dialog",role:"dialog",width:"xlarge",preventOverflow:!1,returnFocusRef:o,sx:{borderRadius:2},"aria-label":"Add a comment",onClickOutside:a.l,onKeyDown:e=>{"Escape"!==e.key&&e.stopPropagation()}},onClose:s,children:(0,r.jsx)(K,{onClose:()=>{s(),u("comments.cancel_thread_reply","CANCEL_REVIEW_THREAD_BUTTON")},suggestedChangesConfig:h,...c})}):(0,r.jsx)("div",{className:"rounded-2 bgColor-default",children:(0,r.jsx)(K,{onClose:()=>{s(),u("comments.cancel_thread_reply","CANCEL_REVIEW_THREAD_BUTTON")},showOnCloseIcon:!1,suggestedChangesConfig:h,...c})}):null}try{X.displayName||(X.displayName="StartConversation")}catch{}var Q=n(78869),Y=n(61445);n(42389),a.l,a.l,a.l,a.l,a.l,a.l,a.l,a.l,a.l,a.l,a.l,a.l,a.l,a.l,a.l},93345:(e,t,n)=>{n.d(t,{p:()=>o});var i=n(4460);function o(e,t="r"){(0,i.Zu)(`#${t}${e}`)}},61445:(e,t,n)=>{n.d(t,{L:()=>d});var i=n(80688),o=n(96540);let{getItem:r,removeItem:a,setItem:l}=(0,i.D)("localStorage"),s=(e,t)=>{let{diffSide:n,filePath:i,line:o,subjectId:r}=e;if(t)return`PullRequest:${r}-File:${i}`;if(void 0!==o&&void 0!==n)return`PullRequest:${r}-File:${i}-Line:${o}-DiffSide:${n}`;throw Error("Cannot build diff line comment cache key for a comment without a line number or diff side")};function d({diffSide:e,filePath:t,handlePersistedCommentExists:n,line:i,subjectId:d,threadId:c,fileLevelComment:m}){let u,h;let f=(0,o.useMemo)(()=>c||(c??s({diffSide:e,filePath:t,line:i,subjectId:d},m)),[e,t,i,d,c,m]),{hasPersistedComment:g,removePersistedCommentFromStorage:p}=(u=r(f),h=!!u?.text?.trim(),(0,o.useEffect)(()=>{h&&n?.(u)},[h]),{hasPersistedComment:h,removePersistedCommentFromStorage:()=>{a(f),h=!1,u=null}});return{hasPersistedComment:g,persistCommentToStorage:e=>{let t={text:e.text};e.startLine&&e.startSide&&(t={...t,startLine:e.startLine,startSide:e.startSide}),l(f,t)},removePersistedCommentFromStorage:p}}},70283:(e,t,n)=>{function i(e,t){return t.some(t=>t.commentId===e.commentId&&t.path===e.path&&t.suggestion.length===e.suggestion.length&&o(t.suggestion,e.suggestion))}n.d(t,{EJ:()=>l,Lm:()=>s,c0:()=>i,o_:()=>a});let o=(e,t)=>e.length===t.length&&!e.some((e,n)=>e!==t[n]),r={USER_CANNOT_APPLY_SUGGESTION:"You do not have permission to apply this suggestion.",PULL_REQUEST_IS_CLOSED:"This suggestion cannot be applied because the pull request is closed.",PULL_REQUEST_IS_IN_MERGE_QUEUE:"This suggestion cannot be applied because the pull request is queued to merge.",IS_OUTDATED:"This suggestion is outdated and cannot be applied.",IS_PENDING:"This suggestion is part of a pending comment and cannot be applied.",IS_RESOLVED:"This suggestion is part of a resolved comment and cannot be applied.",UNCHANGED_CODE:"This suggestion is invalid because no changes were made to the code.",INVALID_RANGE:"Unable to commit due to other pending changes affecting this line.",BATCH_TOO_BIG:"Unable to commit due to too many changes in the batch.",DELETED_LINES:"Unable to apply suggestions on deleted lines.",RANGE_NOT_PROVIDED:"This suggestion does not have a valid line range.",UNABLE_TO_DETERMINE_VALIDITY:"Unable to determine the validity of this suggestion."};function a({suggestedChange:e,isOutdated:t,isPending:n,isResolved:i,pullRequestIsClosed:o,pullRequestIsInMergeQueue:a,userCanApplySuggestion:l,applySuggestedChangesValidationData:s,suggestedChangesConfig:d}){let{lineRange:c}=s;if(t)return{isValid:!1,reason:r.IS_OUTDATED};if(n)return{isValid:!1,reason:r.IS_PENDING};if(i)return{isValid:!1,reason:r.IS_RESOLVED};if(o)return{isValid:!1,reason:r.PULL_REQUEST_IS_CLOSED};if(a)return{isValid:!1,reason:r.PULL_REQUEST_IS_IN_MERGE_QUEUE};if(!l)return{isValid:!1,reason:r.USER_CANNOT_APPLY_SUGGESTION};if(!c)return{isValid:!1,reason:r.RANGE_NOT_PROVIDED};if(!d)return{isValid:!1,reason:r.UNABLE_TO_DETERMINE_VALIDITY};if(!d?.isValidSuggestionRange)return{isValid:!1,reason:r.DELETED_LINES};let m=d?.sourceContentFromDiffLines,u=e.suggestion.join("\n");return 0!==e.suggestion.length&&u===m?{isValid:!1,reason:r.UNCHANGED_CODE}:{isValid:!0}}function l(e,t){let n={isValid:!1,reason:r.INVALID_RANGE},i={isValid:!1,reason:r.BATCH_TOO_BIG};return t.length>=50?i:t.find(t=>t.threadId===e.threadId)||function(e,t){for(let o of t)if(e.path===o.path){var n,i;return n=e.lineRange,i=o.lineRange,n.endLineNumber>=i.startLineNumber&&n.startLineNumber<=i.endLineNumber}return!1}(e,t)?n:{isValid:!0}}function s(e){if(!e||"LINE"!==e.subjectType||!e.subject)return;let t=e.subject.startDiffSide??e.subject.endDiffSide;if(!t)return;if(e.isOutdated&&e.subject.originalStartLine&&e.subject.originalEndLine)return{endLineNumber:e.subject.originalEndLine,endOrientation:e.subject.endDiffSide||"RIGHT",startLineNumber:e.subject.originalStartLine,startOrientation:t};if(!e.subject.endLine||!e.subject.endDiffSide)return;let n=e.subject.startLine??e?.subject.endLine;return{endLineNumber:e.subject.endLine,endOrientation:e.subject.endDiffSide,startLineNumber:n,startOrientation:t||"RIGHT"}}},42389:(e,t,n)=>{n.d(t,{U:()=>i});let i={Failure:"FAILURE",Notice:"NOTICE",Warning:"WARNING"}},14614:(e,t,n)=>{function i(e,t){for(let n of function e(t,n=[]){if(""===t)return n;let i=t.match(o());if(!i)return n;let r=i.groups.fence;if(!r)return n;let a=r.includes("~")?"~":"`",l=t.match(function(e,t){let n=o([e],t);return RegExp(`${n.source}(?:\r?
)(?<suggestion>.*?)(?:\r?
)^ {0,3}${e}{${t},}[ 	]*$`,"ms")}(a,r.length));if(!l)return n;let s=0,d=i.groups.indent;""!==d&&(s=d.length);let c=l.groups.suggestion;if(s>0){let e=RegExp(`^ {0,${s}}`,"m");c=c.replace(e,"")}return n.push(c),e(t.slice(l.index+l[0].length),n)}(e))if(n===t)return{isValid:!1,errorMessage:"Suggested change cannot be the same as the original line"};return{isValid:!0,errorMessage:""}}function o(e=["`","~"],t){let n=t?`{${t}}`:"{3,}",i=e.map(e=>`${e}${n}`);return RegExp(`^(?<indent> {0,3})(?<fence>${i.join("|")})suggestion[ 	]*$`,"m")}n.d(t,{u:()=>i})},76797:(e,t,n)=>{n.d(t,{D:()=>i});function i(e){if("clipboard"in navigator)return navigator.clipboard.writeText(e);let t=document.body;if(!t)return Promise.reject(Error());let n=function(e){let t=document.createElement("pre");return t.style.width="1px",t.style.height="1px",t.style.position="fixed",t.style.top="5px",t.textContent=e,t}(e);return t.appendChild(n),!function(e){if("clipboard"in navigator)return navigator.clipboard.writeText(e.textContent||"");let t=getSelection();if(null==t)return Promise.reject(Error());t.removeAllRanges();let n=document.createRange();n.selectNodeContents(e),t.addRange(n),document.execCommand("copy"),t.removeAllRanges(),Promise.resolve()}(n),t.removeChild(n),Promise.resolve()}},67220:(e,t,n)=>{function i(e){return`line-${e}`}function o(e,t,n){return`${e}${"left"===t?"L":"R"}${n}`}function r(e){return"DELETION"===e?"left":"right"}function a(e,t=!1,n=!1){if(n)return"var(--bgColor-attention-muted, var(--color-attention-subtle))";switch(e){case"ADDITION":return t?"var(--diffBlob-additionNum-bgColor, var(--diffBlob-addition-bgColor-num))":"var(--diffBlob-additionLine-bgColor, var(--diffBlob-addition-bgColor-line))";case"DELETION":return t?"var(--diffBlob-deletionNum-bgColor, var(--diffBlob-deletion-bgColor-num))":"var(--diffBlob-deletionLine-bgColor, var(--diffBlob-deletion-bgColor-line))";case"HUNK":return t?"var(--diffBlob-hunkNum-bgColor, var(--diffBlob-hunk-bgColor-num))":"var(--diffBlob-hunkLine-bgColor, var(--bgColor-accent-muted))";case"EMPTY":return t?"var(--diffBlob-emptyNum-bgColor, var(--diffBlob-hunk-bgColor-num))":"var(--diffBlob-emptyLine-bgColor, var(--bgColor-accent-muted))";default:return}}function l(e){let t=0;if(e)for(let n of e)t=Math.max(t,n?.left??0,n?.right??0);return Math.max(8*t.toString().length+20,40).toString()}n.d(t,{IQ:()=>o,Sq:()=>i,XU:()=>r,c7:()=>l,gK:()=>a})},73974:(e,t,n)=>{n.d(t,{Jg:()=>c,nq:()=>u,uP:()=>h.u,$e:()=>x,P3:()=>g,wj:()=>y,l4:()=>S,Qe:()=>b,Ah:()=>A});var i=n(74848),o=n(21728),r=n(34164),a=n(44968),l=n(67220);let s=e=>{let t,n,s,d,c,m,u,h,f,g;let p=(0,o.c)(34),{dragging:x,isHighlighted:y,isLeftColumn:b,colSpan:C,line:j,lineAnchor:v}=e,N=j.html,S="";if(["ADDITION","DELETION"].includes(j.type)&&["+","-"].includes(N[0])){let e;S=N[0],p[0]!==N?(e=N.slice(1),p[0]=N,p[1]=e):e=p[1],N=e}let T=x&&y,A=b&&"HUNK"!==j.type;p[2]!==T||p[3]!==A?(t=(0,r.$)("diff-text-cell",{"border-left color-border-accent-emphasis":T,"border-right":A}),p[2]=T,p[3]=A,p[4]=t):t=p[4],p[5]!==v?(n=v?(0,l.Sq)(v):void 0,p[5]=v,p[6]=n):n=p[6],p[7]!==y||p[8]!==j.type?(s=(0,l.gK)(j.type,!1,y),p[7]=y,p[8]=j.type,p[9]=s):s=p[9],p[10]!==s?(d={backgroundColor:s},p[10]=s,p[11]=d):d=p[11];let E=S,I="ADDITION"===j.type,D="DELETION"===j.type;p[12]!==I||p[13]!==D?(c=(0,r.$)("diff-text syntax-highlighted-line",{addition:I,deletion:D}),p[12]=I,p[13]=D,p[14]=c):c=p[14];let L=e.lineChild,_="HUNK"===j.type;p[15]!==_?(m=(0,r.$)("diff-text-inner",{"color-fg-muted":_}),p[15]=_,p[16]=m):m=p[16];let R="CONTEXT"===j.type?"-7px":void 0;return p[17]!==R?(u={marginLeft:R},p[17]=R,p[18]=u):u=p[18],p[19]!==N||p[20]!==m||p[21]!==u?(h=(0,i.jsx)(a.mo,{className:m,html:N,style:u}),p[19]=N,p[20]=m,p[21]=u,p[22]=h):h=p[22],p[23]!==S||p[24]!==e.lineChild||p[25]!==h||p[26]!==c?(f=(0,i.jsxs)("code",{"data-code-marker":E,className:c,children:[L,h]}),p[23]=S,p[24]=e.lineChild,p[25]=h,p[26]=c,p[27]=f):f=p[27],p[28]!==C||p[29]!==f||p[30]!==t||p[31]!==n||p[32]!==d?(g=(0,i.jsx)("td",{className:t,colSpan:C,id:n,style:d,children:f}),p[28]=C,p[29]=f,p[30]=t,p[31]=n,p[32]=d,p[33]=g):g=p[33],g};try{s.displayName||(s.displayName="DiffText")}catch{}let d=e=>{let t,n,a,s,d,c,m,u,h,f,g,p,x;let y=(0,o.c)(30);y[0]!==e?({ariaLabel:t,children:n,hasExpanderButton:s,lineType:m,colSpan:a,interactiveProps:d,isHighlighted:c,...u}=e,y[0]=e,y[1]=t,y[2]=n,y[3]=a,y[4]=s,y[5]=d,y[6]=c,y[7]=m,y[8]=u):(t=y[1],n=y[2],a=y[3],s=y[4],d=y[5],c=y[6],m=y[7],u=y[8]),y[9]!==n?(h=(0,i.jsx)("code",{className:"pr-2",children:n}),y[9]=n,y[10]=h):h=y[10];let b=h;if(d){let e;y[11]!==t||y[12]!==d||y[13]!==b?(e=(0,i.jsx)("button",{className:"diff-line-number-button",...d,"aria-label":t,children:b}),y[11]=t,y[12]=d,y[13]=b,y[14]=e):e=y[14],b=e}let C=d?void 0:t,j=!!d;y[15]!==s||y[16]!==j?(f=(0,r.$)("diff-line-number",{"has-expander":s,clickable:j}),y[15]=s,y[16]=j,y[17]=f):f=y[17];let v=a||1;return y[18]!==c||y[19]!==m?(g=(0,l.gK)(m,!0,c),y[18]=c,y[19]=m,y[20]=g):g=y[20],y[21]!==g?(p={backgroundColor:g},y[21]=g,y[22]=p):p=y[22],y[23]!==u||y[24]!==C||y[25]!==f||y[26]!==v||y[27]!==p||y[28]!==b?(x=(0,i.jsx)("td",{"aria-label":C,"data-line-number":!0,className:f,colSpan:v,style:p,...u,children:b}),y[23]=u,y[24]=C,y[25]=f,y[26]=v,y[27]=p,y[28]=b,y[29]=x):x=y[29],x};try{d.displayName||(d.displayName="LineNumber")}catch{}let c=e=>{let t,n,r,a;let l=(0,o.c)(28),{dragging:c,isHighlighted:m,isLeftColumn:u,isSplit:h,lineAnchor:f,line:g,lineChild:p,onLineNumberClick:x}=e,y="CONTEXT"===g.type||"INJECTED_CONTEXT"===g.type,b="ADDITION"!==g.type,C=b||!h,j="DELETION"!==g.type,v=j&&!y||!h,N=h&&y?u?g.left:g.right:g.left;return l[0]!==N||l[1]!==m||l[2]!==g.left||l[3]!==g.right||l[4]!==g.type||l[5]!==x||l[6]!==b||l[7]!==C?(t=C&&(0,i.jsx)(d,{ariaLabel:`Line ${b?g.left?.toString():g.right?.toString()}`,lineType:g.type,interactiveProps:x?{onClick:x}:null,isHighlighted:m,children:b&&N}),l[0]=N,l[1]=m,l[2]=g.left,l[3]=g.right,l[4]=g.type,l[5]=x,l[6]=b,l[7]=C,l[8]=t):t=l[8],l[9]!==m||l[10]!==g.left||l[11]!==g.right||l[12]!==g.type||l[13]!==x||l[14]!==j||l[15]!==v?(n=v&&(0,i.jsx)(d,{ariaLabel:`Line ${j?g.right?.toString():g.left?.toString()}`,lineType:g.type,interactiveProps:x?{onClick:x}:null,isHighlighted:m,children:j&&g.right}),l[9]=m,l[10]=g.left,l[11]=g.right,l[12]=g.type,l[13]=x,l[14]=j,l[15]=v,l[16]=n):n=l[16],l[17]!==c||l[18]!==m||l[19]!==u||l[20]!==g||l[21]!==f||l[22]!==p?(r=(0,i.jsx)(s,{dragging:c,isHighlighted:m,isLeftColumn:u,line:g,lineAnchor:f,lineChild:p}),l[17]=c,l[18]=m,l[19]=u,l[20]=g,l[21]=f,l[22]=p,l[23]=r):r=l[23],l[24]!==t||l[25]!==n||l[26]!==r?(a=(0,i.jsxs)(i.Fragment,{children:[t,n,r]}),l[24]=t,l[25]=n,l[26]=r,l[27]=a):a=l[27],a};try{c.displayName||(c.displayName="DiffLinePart")}catch{}var m=n(75177);function u(){let e,t,n;let r=(0,o.c)(3);return r[0]===Symbol.for("react.memo_cache_sentinel")?(e={bottom:"0 !important",clip:"rect(1px, 1px, 1px, 1px)",clipPath:"inset(50%)",height:"84px",position:"absolute",width:"320px"},r[0]=e):e=r[0],r[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsxs)("clipPath",{id:"diff-placeholder",children:[(0,i.jsx)("rect",{height:"11.9298746",rx:"2",width:"67.0175439",x:"0",y:"0"}),(0,i.jsx)("rect",{height:"11.9298746",rx:"2",width:"100.701754",x:"18.9473684",y:"47.7194983"}),(0,i.jsx)("rect",{height:"11.9298746",rx:"2",width:"37.8947368",x:"0",y:"71.930126"}),(0,i.jsx)("rect",{height:"11.9298746",rx:"2",width:"53.3333333",x:"127.017544",y:"48.0703769"}),(0,i.jsx)("rect",{height:"11.9298746",rx:"2",width:"72.9824561",x:"187.719298",y:"48.0703769"}),(0,i.jsx)("rect",{height:"11.9298746",rx:"2",width:"140.350877",x:"76.8421053",y:"0"}),(0,i.jsx)("rect",{height:"11.9298746",rx:"2",width:"140.350877",x:"17.8947368",y:"23.8597491"}),(0,i.jsx)("rect",{height:"11.9298746",rx:"2",width:"173.684211",x:"166.315789",y:"23.8597491"})]}),r[1]=t):t=r[1],r[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,i.jsx)(m.A,{"aria-hidden":"true",as:"svg",version:"1.1",viewBox:"0 0 340 84",xmlns:"http://www.w3.org/2000/svg",sx:e,children:(0,i.jsxs)("defs",{children:[t,(0,i.jsxs)("linearGradient",{id:"animated-diff-gradient",spreadMethod:"reflect",x1:"0",x2:"0",y1:"0",y2:"1",children:[(0,i.jsx)("stop",{offset:"0",stopColor:"#eee"}),(0,i.jsx)("stop",{offset:"0.2",stopColor:"#eee"}),(0,i.jsx)("stop",{offset:"0.5",stopColor:"#ddd"}),(0,i.jsx)("stop",{offset:"0.8",stopColor:"#eee"}),(0,i.jsx)("stop",{offset:"1",stopColor:"#eee"}),(0,i.jsx)("animateTransform",{attributeName:"y1",dur:"1s",repeatCount:"3",values:"0%; 100%; 0"}),(0,i.jsx)("animateTransform",{attributeName:"y2",dur:"1s",repeatCount:"3",values:"100%; 200%; 0"})]})]})}),r[2]=n):n=r[2],n}try{u.displayName||(u.displayName="DiffPlaceholder")}catch{}var h=n(20174);n(69710);var f=n(38621);function g(e){let t,n,r;let a=(0,o.c)(10),{currentLine:l,hunkButton:c,isLeftColumn:m,isSplit:u}=e;if(u&&!m)return null;a[0]!==l.type||a[1]!==c||a[2]!==u?(t=c?(0,i.jsx)(d,{colSpan:u?1:2,hasExpanderButton:!0,lineType:l.type,children:c}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d,{lineType:l.type,children:(0,i.jsx)(f.KebabHorizontalIcon,{})}),!u&&(0,i.jsx)(d,{lineType:l.type,children:(0,i.jsx)(f.KebabHorizontalIcon,{})})]}),a[0]=l.type,a[1]=c,a[2]=u,a[3]=t):t=a[3];let h=u?3:void 0;return a[4]!==l||a[5]!==h?(n=(0,i.jsx)(s,{isHighlighted:!1,isLeftColumn:!0,colSpan:h,line:l}),a[4]=l,a[5]=h,a[6]=n):n=a[6],a[7]!==t||a[8]!==n?(r=(0,i.jsxs)(i.Fragment,{children:[t,n]}),a[7]=t,a[8]=n,a[9]=r):r=a[9],r}try{g.displayName||(g.displayName="HunkHeaderDiffLine")}catch{}function p(){let e;let t=(0,o.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)("div",{className:"hunk-kebab-icon pr-2 pb-1",children:(0,i.jsx)(f.KebabHorizontalIcon,{})}),t[0]=e):e=t[0],e}try{p.displayName||(p.displayName="HunkKebabIcon")}catch{}function x(e){let t,n,a;let l=(0,o.c)(5),{isLeftColumn:s}=e;return l[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)(d,{lineType:"EMPTY"}),l[0]=t):t=l[0],l[1]!==s?(n=(0,r.$)("empty-diff-line",{"border-right":s}),l[1]=s,l[2]=n):n=l[2],l[3]!==n?(a=(0,i.jsxs)(i.Fragment,{children:[t,(0,i.jsx)("td",{className:n,colSpan:1})]}),l[3]=n,l[4]=a):a=l[4],a}try{x.displayName||(x.displayName="EmptyDiffLine")}catch{}function y(e){let t,n,r,a,l,s,d,c;let m=(0,o.c)(15);return m[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)("thead",{className:"sr-only",children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{scope:"col",children:"Original file line number"}),(0,i.jsx)("th",{scope:"col",children:"Original file line"}),(0,i.jsx)("th",{scope:"col",children:"Diff line number"}),(0,i.jsx)("th",{scope:"col",children:"Diff line change"})]})}),m[0]=t):t=m[0],m[1]!==e.lineWidth?(n=(0,i.jsx)("col",{width:e.lineWidth}),m[1]=e.lineWidth,m[2]=n):n=m[2],m[3]===Symbol.for("react.memo_cache_sentinel")?(r=(0,i.jsx)("col",{}),m[3]=r):r=m[3],m[4]!==e.lineWidth?(a=(0,i.jsx)("col",{width:e.lineWidth}),m[4]=e.lineWidth,m[5]=a):a=m[5],m[6]===Symbol.for("react.memo_cache_sentinel")?(l=(0,i.jsx)("col",{}),m[6]=l):l=m[6],m[7]!==n||m[8]!==a?(s=(0,i.jsxs)("colgroup",{children:[n,r,a,l]}),m[7]=n,m[8]=a,m[9]=s):s=m[9],m[10]!==e.children?(d=(0,i.jsx)("tbody",{children:e.children}),m[10]=e.children,m[11]=d):d=m[11],m[12]!==s||m[13]!==d?(c=(0,i.jsxs)(i.Fragment,{children:[t,s,d]}),m[12]=s,m[13]=d,m[14]=c):c=m[14],c}try{y.displayName||(y.displayName="SplitDiffTable")}catch{}function b(e){let t,n,r,a,l,s,d;let c=(0,o.c)(13);return c[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)("thead",{className:"sr-only",children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{scope:"col",children:"Original file line number"}),(0,i.jsx)("th",{scope:"col",children:"Diff line number"}),(0,i.jsx)("th",{scope:"col",children:"Diff line change"})]})}),c[0]=t):t=c[0],c[1]!==e.lineWidth?(n=(0,i.jsx)("col",{width:e.lineWidth}),r=(0,i.jsx)("col",{width:e.lineWidth}),c[1]=e.lineWidth,c[2]=n,c[3]=r):(n=c[2],r=c[3]),c[4]===Symbol.for("react.memo_cache_sentinel")?(a=(0,i.jsx)("col",{width:"100%"}),c[4]=a):a=c[4],c[5]!==n||c[6]!==r?(l=(0,i.jsxs)("colgroup",{children:[n,r,a]}),c[5]=n,c[6]=r,c[7]=l):l=c[7],c[8]!==e.children?(s=(0,i.jsx)("tbody",{children:e.children}),c[8]=e.children,c[9]=s):s=c[9],c[10]!==l||c[11]!==s?(d=(0,i.jsxs)(i.Fragment,{children:[t,l,s]}),c[10]=l,c[11]=s,c[12]=d):d=c[12],d}try{b.displayName||(b.displayName="UnifiedDiffTable")}catch{}let C={diffTextCell:"UnifiedDiffLines-module__diffTextCell--UAuIr",diffHunkCell:"UnifiedDiffLines-module__diffHunkCell--qPkzg",diffHunkText:"UnifiedDiffLines-module__diffHunkText--Sfwuu",diffTextInner:"UnifiedDiffLines-module__diffTextInner--IuEAA",diffTextMarker:"UnifiedDiffLines-module__diffTextMarker--MdAo4",syntaxHighlightedAdditionLine:"UnifiedDiffLines-module__syntaxHighlightedAdditionLine--lU_S2",syntaxHighlightedDeletionLine:"UnifiedDiffLines-module__syntaxHighlightedDeletionLine--xgQwN",diffLineNumber:"UnifiedDiffLines-module__diffLineNumber--bzzxf"};function j(e){let t,n,r,a;let s=(0,o.c)(9),{line:d,children:c}=e;return s[0]!==d.type?(t=(0,l.gK)(d.type,!0),s[0]=d.type,s[1]=t):t=s[1],s[2]!==t?(n={backgroundColor:t,textAlign:"center"},s[2]=t,s[3]=n):n=s[3],s[4]!==c?(r=(0,i.jsx)("code",{children:c}),s[4]=c,s[5]=r):r=s[5],s[6]!==n||s[7]!==r?(a=(0,i.jsx)("td",{className:C.diffLineNumber,style:n,children:r}),s[6]=n,s[7]=r,s[8]=a):a=s[8],a}function v(e){let t,n,l;let s=(0,o.c)(4),{line:d}=e;s[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)(p,{}),s[0]=t):t=s[0],s[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,r.$)(C.diffTextInner,"color-fg-muted"),s[1]=n):n=s[1];let c=d.html;return s[2]!==c?(l=(0,i.jsx)("td",{colSpan:4,className:C.diffHunkCell,valign:"top",children:(0,i.jsxs)("div",{className:"d-flex flex-row",children:[t,(0,i.jsx)("code",{className:C.diffHunkText,children:(0,i.jsx)(a.mo,{className:n,html:c})})]})}),s[2]=c,s[3]=l):l=s[3],l}function N(e){let t,n,s;let d=(0,o.c)(13),{line:c}=e,m="HUNK"===c.type,u="ADDITION"!==c.type,h="DELETION"!==c.type,f="ADDITION"===c.type?"+":"DELETION"===c.type?"-":void 0,g=!!f;return d[0]!==m||d[1]!==c?(t=m&&(0,i.jsx)(v,{line:c}),d[0]=m,d[1]=c,d[2]=t):t=d[2],d[3]!==m||d[4]!==c||d[5]!==f||d[6]!==u||d[7]!==g||d[8]!==h?(n=!m&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(j,{line:c,children:u&&c.left}),(0,i.jsx)(j,{line:c,children:h&&c.right}),(0,i.jsx)("td",{className:C.diffTextCell,style:{backgroundColor:(0,l.gK)(c.type,!1)},children:(0,i.jsxs)("code",{className:(0,r.$)("ADDITION"===c.type&&C.syntaxHighlightedAdditionLine,"DELETION"===c.type&&C.syntaxHighlightedDeletionLine),children:[g&&(0,i.jsx)("span",{className:C.diffTextMarker,children:f}),(0,i.jsx)(a.mo,{className:C.diffTextInner,html:c.html,style:{backgroundColor:(0,l.gK)(c.type,!1)}})]})})]}),d[3]=m,d[4]=c,d[5]=f,d[6]=u,d[7]=g,d[8]=h,d[9]=n):n=d[9],d[10]!==t||d[11]!==n?(s=(0,i.jsxs)("tr",{children:[t,n]}),d[10]=t,d[11]=n,d[12]=s):s=d[12],s}function S(e){let t,n,a,l,s;let d=(0,o.c)(17),{className:c,sx:u,lines:h,lineWidth:f,tabSize:g}=e;if(d[0]!==h||d[1]!==g){let e;d[3]!==g?(e=(e,t)=>(0,i.jsx)(N,{line:e,tabSize:g},t),d[3]=g,d[4]=e):e=d[4],t=h.map(e),d[0]=h,d[1]=g,d[2]=t}else t=d[2];let p=t;return d[5]!==c?(n=(0,r.$)(c,"tab-size"),d[5]=c,d[6]=n):n=d[6],d[7]!==u?(a={borderTop:0,borderBottom:0,borderLeft:1,borderRight:1,borderStyle:"solid",borderColor:"border.muted",...u},d[7]=u,d[8]=a):a=d[8],d[9]!==p||d[10]!==f?(l=(0,i.jsx)(b,{lineWidth:f,children:p}),d[9]=p,d[10]=f,d[11]=l):l=d[11],d[12]!==n||d[13]!==a||d[14]!==l||d[15]!==g?(s=(0,i.jsx)(m.A,{as:"table",className:n,"data-tab-size":g,sx:a,children:l}),d[12]=n,d[13]=a,d[14]=l,d[15]=g,d[16]=s):s=d[16],s}try{j.displayName||(j.displayName="LineNumberCell")}catch{}try{v.displayName||(v.displayName="HunkCell")}catch{}try{N.displayName||(N.displayName="UnifiedDiffRow")}catch{}try{S.displayName||(S.displayName="UnifiedDiffLines")}catch{}function T(e){return"LEFT"===e?"-":"RIGHT"===e?"+":""}function A({startDiffSide:e,endDiffSide:t,originalStartLine:n,originalEndLine:i}){return e&&t&&"number"==typeof n&&"number"==typeof i?0===n&&1===i&&e===t?"-1 to +1":e===t&&n===i?`${T(e)}${n}`:`${T(e)}${n} to ${T(t)}${i}`:""}},88771:(e,t,n)=>{n.d(t,{z:()=>r});var i=n(74848),o=n(75177);let r=(0,n(96540).forwardRef)(({onClick:e,id:t,children:n},r)=>(0,i.jsx)(o.A,{as:"button",type:"button",id:t,ref:r,sx:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"left",fontWeight:400,color:"fg.muted",width:"100%",backgroundColor:"canvas.default",border:"1px solid",borderColor:"border.default",cursor:"text",borderRadius:2,height:"var(--control-medium-size)",lineHeight:"var(--text-body-lineHeight-medium)",px:2},onClick:e,children:n}));r.displayName="CompactCommentButton"},22025:(e,t,n)=>{n.d(t,{U:()=>m});var i=n(74848),o=n(50064),r=n(47584),a=n(75177),l=n(96540),s=n(61445),d=n(14614),c=n(97745);function m({batchPending:e,batchingEnabled:t,commentBoxConfig:n,commentBoxSubject:m,condensed:u,fileLevelComment:h,filePath:f,focusOnMount:g,isReplying:p,lineNumber:x,onAddComment:y,onCancelComment:b,onPersistedCommentExists:C,quotedText:j="",side:v,startLineNumber:N,subjectId:S,threadId:T,suggestedChangesConfig:A}){let[E,I]=(0,l.useState)(j),[D,L]=(0,l.useState)(!1),[_,R]=(0,l.useState)(),w=(0,l.useRef)(null),k=(0,l.useRef)(null),{persistCommentToStorage:O,removePersistedCommentFromStorage:U}=(0,s.L)({diffSide:v,filePath:f,line:x,subjectId:S,threadId:T,handlePersistedCommentExists:({text:e})=>{e&&(I(e),C?.())},fileLevelComment:!!h});(0,l.useEffect)(()=>{if(g){let e=setTimeout(()=>{if(k.current&&(r.XC||r.cg)){let e=k.current,t=e.getBoundingClientRect(),n=r.XC?.documentElement.clientHeight||0;if(!(t.top>=0&&t.bottom<=(r.cg?.innerHeight||n))){let i=t.top,o=r.XC?.documentElement.getBoundingClientRect().top||0,a=e.clientHeight*(2/3);r.cg?.scrollTo({top:i-o-2/3*n+a,behavior:"smooth"})}}w.current?.focus()},100);return()=>{window.clearTimeout(e)}}},[g]);let M=({submitBatch:e})=>{let t="Failed to save comment";if(D)return;if(!E.trim()){R(`${t}: Body can't be blank`);return}L(!0),R(void 0);let n=(0,d.u)(E,A?.sourceContentFromDiffLines??"");if(!n.isValid){R(n.errorMessage),L(!1);return}y?.({commentText:E,onCompleted(){L(!1),$()},onError(e){L(!1),e.message&&(t=`${t}: ${e.message}`),R(t)},submitBatch:e})},B=()=>M({submitBatch:!1}),P=()=>M({submitBatch:!0}),$=()=>{U(),I(""),b?.()},H={footer:{justifyContent:p?"end":"space-between","> div:first-child":{display:u||p?"none":"flex"},...u&&{"> div:last-child":{display:"flex",flexDirection:"column",width:"100%"}}}};return(0,i.jsx)(a.A,{sx:{display:"flex",flexDirection:"column",fieldset:{minWidth:0,width:["100%"]}},children:(0,i.jsxs)(c.S,{ref:w,label:"Add diff comment",sx:H,value:E,onChange:e=>{R(void 0),O({text:e}),I(e)},onPrimaryAction:t?B:P,userSettings:n,suggestedChangesConfig:A,markdownErrorMessage:_,subject:m,lineNumber:x,filePath:f,startLineNumber:N,children:[b&&(0,i.jsx)(o.x,{disabled:D,sx:{py:1,px:2},variant:"default",onClick:$,children:"Cancel"}),!e&&(0,i.jsx)(o.x,{disabled:D||!E.length,sx:{py:1,px:2},variant:t?"default":"primary",onClick:P,ref:k,children:p?"Reply":"Comment"}),t&&(0,i.jsx)(o.x,{disabled:D||!E.length,sx:{py:1,px:2},variant:"primary",onClick:B,children:e?"Add review comment":"Start a review"})]})})}try{m.displayName||(m.displayName="AddCommentEditor")}catch{}},33563:(e,t,n)=>{n.d(t,{Y:()=>g});var i=n(74848),o=n(62456),r=n(44968),a=n(38621),l=n(52464),s=n(30631),d=n(55847),c=n(34164),m=n(42389);let u={annotation:"Annotation-module__annotation--YCi6_",annotationSource:"Annotation-module__annotationSource--dVVXf",annotationMessage:"Annotation-module__annotationMessage--SE4MR"};var h=n(82126);let f={[m.U.Failure]:(0,i.jsx)(a.StopIcon,{className:"fgColor-danger"}),[m.U.Warning]:(0,i.jsx)(a.AlertIcon,{className:"fgColor-attention"}),[m.U.Notice]:(0,i.jsx)(a.InfoIcon,{className:"fgColor-muted"})};function g({annotation:e}){return(0,i.jsxs)("div",{className:(0,c.$)("p-3 bgColor-default",h.GF[e.annotationLevel].borderColor,u.annotation),children:[(0,i.jsxs)("div",{className:"d-flex flex-items-center mb-2",children:[f[e.annotationLevel],(0,i.jsx)(l.A,{weight:"semibold",className:"fgColor-muted pl-2",size:"small",children:h.GF[e.annotationLevel].ariaLabel})]}),(0,i.jsx)("div",{className:"ml-4",children:e.title&&(0,i.jsx)(l.A,{weight:"semibold",size:"medium",className:h.GF[e.annotationLevel].primaryColorClass,children:e.title})}),(0,i.jsx)("div",{className:"mb-3 mt-1 ml-4",children:e.message&&(0,i.jsx)(r.mo,{html:e.message,className:u.annotationMessage})}),(0,i.jsxs)("div",{className:"d-flex flex-items-center flex-justify-between ml-4",children:[(0,i.jsxs)("div",{className:u.annotationSource,children:[(0,i.jsx)(o.r,{src:e.appAvatarUrl,alt:e.appAvatarAltText}),(0,i.jsxs)(s.A,{className:"ml-2",maxWidth:"300px",inline:!0,title:`${e.checkSuiteName} / ${e.checkRun.name}`,children:[(0,i.jsx)(l.A,{weight:"semibold",size:"small",children:e.checkSuiteName})," ","/ ",(0,i.jsx)(l.A,{size:"small",children:e.checkRun.name})]})]}),e.checkRun.detailsUrl&&(0,i.jsx)(d.Q,{as:"a",href:e.checkRun.detailsUrl,size:"small",children:"View details"})]})]})}try{g.displayName||(g.displayName="Annotation")}catch{}},82126:(e,t,n)=>{n.d(t,{GF:()=>d,S:()=>s,Xh:()=>a});var i=n(74848),o=n(38267),r=n(42389);function a({annotationLevel:e,...t}){let{icon:n,...o}=d[e];return function({fill:e,stroke:t,ariaLabel:n,svgHtml:o,className:r}){return(0,i.jsx)("svg",{"aria-label":n,className:r,fill:e,height:"24",stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",style:{boxShadow:"none"},viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",children:o})}({...n,...o,...t})}let l=(0,o.i7)(["0%{opacity:0;}100%{opacity:1;}"]),s=(0,o.Ay)(a).withConfig({displayName:"AnnotationIcon__AnimatedAnnotationIcon",componentId:"sc-5b4ebd36-0"})(["animation:"," 0.1s ease-in;"],l),d={[r.U.Failure]:{priority:1,ariaLabel:"Check failure",primaryColor:"danger.fg",primaryColorClass:"fgColor-danger",borderColor:"borderColor-danger-emphasis",icon:{fill:"var(--bgColor-danger-emphasis, var(--color-danger-emphasis))",stroke:"var(--fgColor-onEmphasis, var(--color-fg-on-emphasis))",svgHtml:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,i.jsx)("line",{x1:"15",x2:"9",y1:"9",y2:"15"}),(0,i.jsx)("line",{x1:"9",x2:"15",y1:"9",y2:"15"})]})}},[r.U.Warning]:{priority:2,ariaLabel:"Check warning",primaryColor:"attention.fg",primaryColorClass:"fgColor-attention",borderColor:"borderColor-attention-emphasis",icon:{fill:"var(--bgColor-attention-emphasis, var(--color-attention-emphasis))",stroke:"var(--fgColor-onEmphasis, var(--color-fg-on-emphasis))",svgHtml:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,i.jsx)("line",{x1:"12",x2:"12",y1:"8",y2:"12"}),(0,i.jsx)("line",{x1:"12",x2:"12",y1:"16",y2:"16"})]})}},[r.U.Notice]:{priority:3,ariaLabel:"Check notice",primaryColor:"fg.muted",primaryColorClass:"fgColor-muted",borderColor:"fgColor-muted",icon:{fill:"var(--bgColor-neutral-emphasis, var(--color-neutral-emphasis))",stroke:"var(--fgColor-onEmphasis, var(--color-fg-on-emphasis))",svgHtml:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,i.jsx)("line",{x1:"12",x2:"12",y1:"16",y2:"12"}),(0,i.jsx)("line",{x1:"12",x2:"12",y1:"8",y2:"8"})]})}}};try{a.displayName||(a.displayName="AnnotationIcon")}catch{}try{s.displayName||(s.displayName="AnimatedAnnotationIcon")}catch{}},80765:(e,t,n)=>{n.d(t,{$:()=>y});var i=n(74848),o=n(70404),r=n(45996),a=n(69676),l=n(82678),s=n(75177),d=n(63867),c=n(73451),m=n(9591),u=n(19647),h=n(27331),f=n(96540);function g({children:e,footerButtons:t}){let{containerRef:n}=(0,l.G)({bindKeys:a.z0.ArrowHorizontal|a.z0.Tab,focusInStrategy:"closest"});return t?(0,i.jsx)(h.l.Footer,{ref:n,children:(0,i.jsxs)(s.A,{sx:{display:"flex",flexDirection:"column"},children:[(0,i.jsx)(s.A,{sx:{display:"flex",flexDirection:"row",gap:2,justifyContent:"flex-end"},children:(0,i.jsx)(h.l.Buttons,{buttons:t})}),e]})}):null}let p={CHANGE_COMMIT_MESSAGE:"CHANGE_COMMIT_MESSAGE",CHANGE_EXTENDED_DESCRIPTION:"CHANGE_EXTENDED_DESCRIPTION"};function x(e,t){switch(t.type){case p.CHANGE_COMMIT_MESSAGE:return{...e,commitMessage:t.payload};case p.CHANGE_EXTENDED_DESCRIPTION:return{...e,extendedDescription:t.payload};default:return console.error("Unknown suggested change action."),e}}function y({authorLogins:e,batchSize:t,onClose:n,onCommit:a}){let l=(0,r.A)(),{sendAnalyticsEvent:y}=(0,o.s)(),[b,C]=(0,f.useState)(!1),[j,v]=(0,f.useState)(),[N,S]=(0,f.useReducer)(x,{commitMessage:1===e.length?`Apply suggestion from @${e[0]}`:1===new Set(e).size?`Apply suggestions from @${e[0]}`:"Apply suggestions from code review",extendedDescription:""}),T=(0,f.useCallback)((e,t,n)=>{if(!l())return;let i="There was an error trying to commit changes";n?i+=`: ${n}`:i+=".",C(!1),v(i)},[l]),A=(0,f.useCallback)(()=>{l()&&(C(!1),j&&v(void 0))},[j,l]),E=(0,f.useCallback)(()=>{b||(C(!0),y("comments.commit_suggestion","COMMIT_SUGGESTION_DIALOG_BUTTON",{batchSize:t}),a(`${N.commitMessage}

${N.extendedDescription}`,T,A))},[t,N.commitMessage,N.extendedDescription,A,T,b,a,y]);return(0,i.jsxs)(h.l,{title:"Apply suggestion",renderFooter:()=>(0,i.jsx)(g,{footerButtons:[{content:"Cancel",onClick:n},{content:(0,i.jsxs)(s.A,{as:"span",sx:{display:"flex",flexDirection:"row",alignItems:"center"},children:["Commit changes",b&&(0,i.jsx)(d.A,{size:"small",sx:{ml:1}})]}),onClick:E,buttonType:"primary"}],children:j&&(0,i.jsx)(c.A.Validation,{sx:{mt:2,pt:1,justifyContent:"flex-end"},variant:"error",children:j})}),onClose:n,children:[(0,i.jsxs)(c.A,{sx:{mb:2},children:[(0,i.jsx)(c.A.Label,{children:"Commit message"}),(0,i.jsx)(m.A,{block:!0,name:"commit_message",onChange:e=>S({type:p.CHANGE_COMMIT_MESSAGE,payload:e.target.value}),value:N.commitMessage})]}),(0,i.jsxs)(c.A,{children:[(0,i.jsx)(c.A.Label,{children:"Extended description (optional)"}),(0,i.jsx)(u.Ay,{block:!0,rows:3,placeholder:"Add an optional description...",onChange:e=>S({type:p.CHANGE_EXTENDED_DESCRIPTION,payload:e.target.value}),value:N.extendedDescription})]})]})}try{g.displayName||(g.displayName="DialogFooter")}catch{}try{y.displayName||(y.displayName="ApplySuggestionDialog")}catch{}},97745:(e,t,n)=>{n.d(t,{S:()=>r});var i=n(74848),o=n(25273);let r=(0,n(96540).forwardRef)(({children:e,subject:t,...n},r)=>(0,i.jsx)(o.h,{...n,ref:r,placeholder:"Leave a comment",actions:e,subject:t,showLabel:!1}));r.displayName="ConversationCommentBox"},94493:(e,t,n)=>{n.d(t,{H:()=>g});var i=n(74848),o=n(88771),r=n(47584),a=n(70404),l=n(75177),s=n(37827),d=n(96540),c=n(93345),m=n(70283),u=n(22025),h=n(8187),f=n(78869);function g({batchingEnabled:e,batchPending:t,commentAnchorPrefix:n,commentingImplementation:g,commentsConnectionId:p,filePath:x,hideDiffPreview:y,onRefreshThread:b,enterDialogMode:C,repositoryId:j,subject:v,subjectId:N,tabSize:S,thread:T,threadsConnectionId:A,shouldLimitHeight:E=!0,suggestedChangesConfig:I,viewerData:D,ghostUser:L}){let[_,R]=(0,d.useState)(!1),[w,k]=(0,d.useState)(void 0),{sendAnalyticsEvent:O}=(0,a.s)(),{addThreadReply:U}=g,M=(0,d.useRef)(null),B=e=>{k(e),R(!0)};if(null===T.commentsData.comments||T.commentsData.comments.length<1)return null;let P=(0,m.Lm)(T),$="LINE"===T.subjectType?{lineRange:P}:void 0;return(0,i.jsx)("div",{"data-testid":"review-thread",children:(0,i.jsxs)(l.A,{sx:E?{maxHeight:"40vh",overflowY:"auto"}:{},children:[!y&&T.isOutdated&&(0,i.jsx)(f.i,{subject:T.subject,tabSize:S??4}),T.commentsData.comments.map((e,t)=>(0,i.jsx)(h.U,{enterDialogMode:C,isAnchorable:!0,index:t,isFirstComment:0===t,isLastChild:t===T.commentsData.comments.length-1,anchorPrefix:n,comment:e,commentConnectionId:T.commentsData.__id,commentingImplementation:g,filePath:x,isOutdated:T.isOutdated,repositoryId:j,subject:v,subjectId:N,threadId:T.id,onRefreshThread:b,onQuoteReply:B,threadCommentCount:T.commentsData.comments.length,threadsConnectionId:A,isThreadResolved:!!T.isResolved,suggestedChangesConfig:I,applySuggestedChangesValidationData:$,viewerData:D,ghostUser:L},e.id)),T.reviewCommentsLimitExceeded&&(0,i.jsx)(s.l,{"aria-label":"Warning",title:"Warning",variant:"warning",hideTitle:!0,description:`Only the first ${(T.reviewCommentsLimit||0)-1} replies are currently being shown.`,className:"m-3"}),T.viewerCanReply&&(0,i.jsxs)(l.A,{sx:{borderBottomLeftRadius:2,borderBottomRightRadius:2,p:2},children:[_&&(0,i.jsx)(u.U,{batchingEnabled:e,batchPending:t,commentBoxConfig:g.commentBoxConfig,commentBoxSubject:g.commentBoxSubject,condensed:!1,fileLevelComment:!0,filePath:x,focusOnMount:!0,isReplying:!0,onCancelComment:()=>{R(!1),O("comments.cancel_thread_reply","CANCEL_REVIEW_THREAD_BUTTON"),r.cg?.requestAnimationFrame(()=>M.current?.focus())},repositoryId:j,quotedText:w,subjectId:N,threadId:T.id,onAddComment:({commentText:e,onCompleted:t,onError:n,submitBatch:i})=>{let o=[];T.commentsData.__id&&o.push(T.commentsData.__id),p&&o.push(p),U({commentsConnectionIds:o,filePath:x,thread:T,text:e,submitBatch:i,onCompleted:e=>{e&&(0,c.p)(e.toString()),t?.(),b?.(T.id)},onError:n,threadsConnectionId:A}),O("comments.add","ADD_COMMENT_BUTTON")},suggestedChangesConfig:I}),!_&&(0,i.jsx)(o.z,{ref:M,onClick:()=>{O("comments.start_thread_reply","REPLY_TO_THREAD_INPUT_BUTTON"),R(!0)},children:"Write a reply"})]})]})})}try{g.displayName||(g.displayName="ReviewThread")}catch{}},8187:(e,t,n)=>{n.d(t,{U:()=>W});var i=n(74848),o=n(25273),r=n(81874),a=n(77433),l=n(52655),s=n(73218),d=n(36172),c=n(16497),m=n(22368),u=n(44968),h=n(47584),f=n(67136),g=n(38621),p=n(53526),x=n(75177),y=n(6869),b=n(96540),C=n(42242),j=n(93345),v=n(61445),N=n(14614),S=n(97745),T=n(38568),A=n(40961),E=n(70283),I=n(56126),D=n(70404),L=n(55847);function _({commentingImplementation:e,suggestedChange:t}){let{sendAnalyticsEvent:n}=(0,D.s)();return(0,i.jsx)(x.A,{sx:{display:"flex",flexDirection:"row-reverse"},children:(0,i.jsx)(L.Q,{variant:"primary",onClick:()=>{n("comments.add_suggested_change_to_batch","ADD_SUGGESTED_CHANGE_TO_BATCH_BUTTON"),e.addSuggestedChangeToPendingBatch(t)},children:"Add suggestion to batch"})})}try{_.displayName||(_.displayName="AddToExistingBatch")}catch{}var R=n(91321),w=n(89323),k=n(87330),O=n(15385);let U={addSuggestionToBatch:{text:"Add suggestion to batch"},applySuggestion:{text:"Apply suggestion"}};function M({commentingImplementation:e,onOpenDialog:t,suggestedChange:n}){let{sendAnalyticsEvent:o}=(0,D.s)(),[r,a]=(0,b.useState)(U.applySuggestion),[l,s]=(0,b.useState)(!1),d=(0,b.useRef)(null),c=(0,b.useRef)(null),m=()=>s(!l),{addSuggestedChangeToPendingBatch:u}=e,h=(0,b.useCallback)(()=>{r===U.addSuggestionToBatch&&(u(n),o("comments.add_suggested_change_to_batch","ADD_SUGGESTED_CHANGE_TO_BATCH_BUTTON")),r===U.applySuggestion&&t(c)},[u,t,r,o,n]);return(0,i.jsx)(x.A,{sx:{display:"flex",flexDirection:"row-reverse"},children:(0,i.jsxs)(R.A,{children:[(0,i.jsx)(L.Q,{variant:"primary",onClick:h,ref:c,children:r.text}),(0,i.jsxs)(w.W,{anchorRef:d,open:l,onOpenChange:m,children:[(0,i.jsx)(w.W.Anchor,{children:(0,i.jsx)(k.K,{ref:d,"aria-haspopup":"true","aria-label":"More suggestion batching options",icon:g.TriangleDownIcon,size:"medium",variant:"primary",onClick:m})}),(0,i.jsx)(w.W.Overlay,{width:"medium",children:(0,i.jsx)(O.l,{selectionVariant:"single",children:Object.keys(U).map(e=>{let t=U[e];return(0,i.jsx)(O.l.Item,{selected:r===t,onSelect:()=>a(t),children:t.text},e)})})})]})]})})}try{M.displayName||(M.displayName="ApplyOrAddToBatch")}catch{}var B=n(80765),P=n(52464);function $({reason:e,sx:t}){return(0,i.jsx)(x.A,{sx:{m:2,...t},children:(0,i.jsx)(P.A,{as:"small",sx:{color:"fg.muted"},children:e})})}try{$.displayName||($.displayName="CodeSuggestionUnavailable")}catch{}var H=n(47139);function F({commentingImplementation:e,onOpenDialog:t,suggestedChange:n}){let o=(0,b.useRef)(null),r=(0,b.useCallback)(()=>{t(o)},[t]),a=e.pendingSuggestedChangesBatch.length,{sendAnalyticsEvent:l}=(0,D.s)();return(0,i.jsxs)(x.A,{sx:{display:"flex",justifyContent:"space-between",flexDirection:"row"},children:[(0,i.jsx)(H.A,{variant:"attention",sx:{my:"auto"},children:"Pending in batch"}),(0,i.jsxs)(x.A,{sx:{display:"flex",gap:2},children:[(0,i.jsx)(L.Q,{size:"medium",variant:"danger",onClick:()=>{e.removeSuggestedChangeFromPendingBatch(n),l("comments.remove_suggested_change_from_batch","REMOVE_SUGGESTED_CHANGE_FROM_BATCH_BUTTON")},children:"Remove from batch"}),(0,i.jsx)(L.Q,{ref:o,size:"medium",count:a,variant:"primary",onClick:r,children:`Apply suggestion${a>1?"s":""}`})]})]})}try{F.displayName||(F.displayName="CommitOrRemoveFromBatch")}catch{}function G({commentingImplementation:e,suggestedChange:t}){let{setIsDialogOpen:n}=(0,I.W)(),[o,r]=(0,b.useState)(!1),a=(0,b.useRef)(void 0),{pendingSuggestedChangesBatch:l,submitSuggestedChanges:s}=e,d=(0,E.c0)(t,l),c=0===l.length,{isValid:m,reason:u}=(0,E.EJ)(t,l),h=(0,b.useMemo)(()=>d?l:[t],[d,l,t]),f=(0,b.useCallback)(e=>{r(e),n?.(e)},[n]),g=(0,b.useCallback)(()=>{if(f(!1),a.current){let e=a.current.current;setTimeout(()=>e?.focus())}},[f]),p=(0,b.useCallback)(e=>{f(!0),a.current=e},[f,a]),y=(0,b.useCallback)((e,t,n)=>{s({suggestedChanges:h,commitMessage:e,onCompleted:()=>{g(),n()},onError:t})},[g,s,h]);return(0,i.jsxs)(x.A,{sx:{p:2,borderTop:"1px solid",borderColor:"border.default"},children:[d&&(0,i.jsx)(F,{commentingImplementation:e,suggestedChange:t,onOpenDialog:p}),!d&&!m&&u&&(0,i.jsx)($,{reason:u,sx:{m:0}}),!d&&c&&(0,i.jsx)(M,{commentingImplementation:e,suggestedChange:t,onOpenDialog:p}),!d&&m&&!c&&(0,i.jsx)(_,{commentingImplementation:e,suggestedChange:t}),o&&(0,i.jsx)(B.$,{authorLogins:h.map(e=>e.authorLogin),batchSize:h.length,onClose:g,onCommit:y})]})}try{G.displayName||(G.displayName="CodeSuggestionActions")}catch{}function V({applySuggestedChangesValidationData:e,comment:t,commentBodyRef:n,commentingImplementation:o,filePath:r,isOutdated:a,isThreadResolved:l,subject:s,suggestedChangesConfig:d,databaseId:c,viewerData:m}){let u=function(e,t,n,i,o){let[r,a]=(0,b.useState)();return(0,T.N)(()=>{if(!e.current||t.subjectType?.toUpperCase()!=="LINE")return;let r=[...e.current.getElementsByClassName("js-apply-changes")];if(r.length>0){let e=[];for(let a of r){let r=a?.closest("div.js-suggested-changes-blob");if(!r)continue;let l=[...r.querySelectorAll(".js-blob-code-addition")];o.lineRange&&e.push({authorLogin:t.author?.login??"ghost",commentId:t.id,path:n,ref:a,suggestion:l.map(e=>e.textContent),lineRange:o.lineRange,threadId:i})}a(e)}},[o.lineRange,t.author?.login,t.bodyHTML,t.id,t.subjectType,e,n,i]),r}(n,t,r,c,e),h=s?.state?.toUpperCase();return(0,i.jsx)(i.Fragment,{children:u?.length?u.map(n=>{let{isValid:r,reason:c}=(0,E.o_)({suggestedChange:n,isOutdated:a,isPending:"PENDING"===t.state.toUpperCase(),isResolved:l,pullRequestIsClosed:void 0===h||"CLOSED"===h||"MERGED"===h,pullRequestIsInMergeQueue:!!s?.isInMergeQueue,userCanApplySuggestion:!!m?.viewerCanApplySuggestion,applySuggestedChangesValidationData:e,suggestedChangesConfig:d});return!r&&c?(0,A.createPortal)((0,i.jsx)($,{reason:c}),n.ref):(0,A.createPortal)((0,i.jsx)(G,{commentingImplementation:o,suggestedChange:n}),n.ref)}):null})}try{V.displayName||(V.displayName="SuggestedChangeView")}catch{}function W({isAnchorable:e=!1,index:t=0,isLastChild:n,isOutdated:T,isThreadResolved:A,anchorPrefix:E="r",comment:I,commentingImplementation:D,filePath:L,hideActions:_,isFirstComment:R=!1,enterDialogMode:w=s.l,onRefreshThread:k,onQuoteReply:O=s.l,subjectId:U,subject:M,threadCommentCount:B,threadId:P,threadsConnectionId:$,suggestedChangesConfig:H,applySuggestedChangesValidationData:F,viewerData:G,ghostUser:W=l.t.ghostUser,skipReactions:z=!1}){let{addToast:q}=(0,f.Y6)(),[K,X]=(0,b.useState)(!1),[Q,Y]=(0,b.useState)(I.isHidden),[J,Z]=(0,b.useState)(I.body),[ee,et]=(0,b.useState)(!1),[en,ei]=(0,b.useState)(""),{persistCommentToStorage:eo,removePersistedCommentFromStorage:er}=(0,v.L)({subjectId:U,filePath:L,fileLevelComment:"FILE"===I.subjectType,threadId:I.id,handlePersistedCommentExists:({text:e})=>{e&&Z(e)}}),{editComment:ea,deleteComment:el,hideComment:es,unhideComment:ed,reactToComment:ec,lazyFetchReactionGroups:em}=D,eu=(0,b.useRef)(null),eh=(0,b.useRef)(null),[ef,eg]=(0,b.useState)(""),{isInDialogMode:ep}=(0,C.q)(),ex=()=>{eu.current?.focus()};(0,b.useEffect)(()=>{if(K){let e=window.setTimeout(ex);return()=>{window.clearTimeout(e)}}},[K]);let ey=(0,p.S)(),{enableInlineCommentDialogMode:eb,disableInlineCommentDialogMode:eC}=(0,C.q)(),ej=async()=>{eC();let e=!1;try{e=await ey({title:"Delete comment?",content:"Are you sure you want to delete this comment?",confirmButtonContent:"Delete",confirmButtonType:"danger"})}finally{eb()}e&&el({commentId:I.id,onCompleted:()=>{k?.(P)},onError:()=>{et(!1),q({type:"error",message:"Failed to delete comment"})},threadCommentCount:B,threadId:P,threadsConnectionId:$,filePath:L})},ev=(0,b.useCallback)(()=>{et(!0);let e=(0,N.u)(J,H?.sourceContentFromDiffLines??"");if(!e.isValid){ei(e.errorMessage),et(!1);return}ea({text:J,comment:I,onCompleted:()=>{X(!1),et(!1),er(),k?.(P)},onError:()=>{et(!1),q({type:"error",message:"Failed to update comment"})}})},[q,J,I,ea,k,er,H,P]),eN=I.databaseId?.toString(),eS=eN?`${E}${eN}`:void 0,eT=eS&&h.fV?new URL(`${h.fV.pathname}#${eS}`,h.fV.origin).toString():"",eA=(0,b.useRef)(null);(0,b.useEffect)(()=>{e&&eN&&eS&&window.location.hash.split("#").pop()===eS&&((0,j.p)(eN,E),w?.(!1),eA.current?.focus())},[E,eS,eN,w,e]);let eE={outline:"2px solid",outlineColor:"accent.fg",outlineOffset:"-2px",boxShadow:"none"},eI=t>0,eD=t>1,eL=D.suggestedChangesEnabled,e_=K?"editing":Q?"hidden":"visible",eR={headingProps:{as:"h3"},avatarUrl:I.author?.avatarUrl??W.avatarUrl,comment:{...I,url:eT,referenceText:I.reference.text??`#${I.reference.number}`},commentRef:eA,deleteComment:ej,editComment:()=>{X(!0)},editHistoryComponent:void 0,hideComment:e=>{es({commentDatabaseId:I.databaseId,reason:e,onCompleted:()=>{k?.(P)},onError:()=>{et(!1),eg("Failed to hide comment")}})},onMinimize:Y,isMinimized:Q,commentAuthorLogin:I.author?.login??W.login,navigate:s.l,commentSubjectAuthorLogin:I.reference?.author?.login??"",commentSubjectType:D.commentSubjectType,onReplySelect:O,unhideComment:()=>{ed({commentDatabaseId:I.databaseId,onCompleted:()=>{k?.(P)},onError:()=>{et(!1),eg("Failed to unhide comment")}})},hideActions:_,isReply:eI,forceInlineAvatar:!0,containerStyle:{}};return(0,i.jsxs)(x.A,{ref:eA,id:e?eS:void 0,tabIndex:-1,"data-first-thread-comment":R,sx:{"&:not(:first-child)":{backgroundColor:"canvas.inset"},"&:first-child + div":{borderTop:"1px solid",borderColor:"border.muted"},":target":eE,":focus":eE,scrollMarginTop:e?"120px":0},children:[eD&&(0,i.jsx)(x.A,{sx:{display:"flex",pl:eI?1:0},children:(0,i.jsx)(x.A,{sx:{ml:4,height:8,borderLeft:"1px solid",borderColor:"border.default"}})}),(0,i.jsx)(x.A,{sx:{px:3,pt:eD?0:2,pb:0},children:(0,i.jsx)(r.v,{...eR,commentBody:I.body,threadCommentCount:B,isInDialogMode:ep,actions:_?void 0:(0,i.jsx)(a.p,{...eR})})}),ef&&(0,i.jsxs)(y.A,{variant:"danger",className:"m-3",children:[(0,i.jsx)(g.StopIcon,{className:"mr-2"}),ef]}),(0,i.jsxs)(x.A,{sx:{display:"flex",pl:eI?1:0},children:[eI&&(0,i.jsx)(x.A,{sx:{ml:4,mr:1,pl:3,borderLeft:"1px solid",borderColor:"border.default",...n&&{borderImage:"linear-gradient(to bottom, var(--borderColor-default, var(--color-border-default)), rgba(0, 0, 0, 0)) 1 100%"}}}),"editing"===e_&&(0,i.jsx)(x.A,{sx:{pr:2,pl:eI?0:2,pb:2,pt:1,flexGrow:1},children:(0,i.jsxs)(S.S,{ref:eu,label:"Update comment",value:J,onChange:e=>{eo({text:e}),Z(e),ei(void 0)},onPrimaryAction:ev,userSettings:D.commentBoxConfig,subject:D.commentBoxSubject,suggestedChangesConfig:H,markdownErrorMessage:en,children:[(0,i.jsx)(o.x,{variant:"default",onClick:()=>{X(!1),er(),Z(I.body)},children:"Cancel"}),(0,i.jsx)(o.x,{disabled:ee||!J.length,variant:"primary",onClick:ev,children:"Update"})]})}),"visible"===e_&&(0,i.jsx)(x.A,{sx:eI?{pb:2,pr:2,overflowX:"auto",width:"100%"}:{px:3,pb:2,width:"100%"},children:I.bodyHTML&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u.oG,{ref:eh,className:"markdown-body","comment-testid":`Comment body html for comment ${I.id}`,html:I.bodyHTML,sx:{mt:1,fontSize:1}}),I.reactionGroups&&ec?(0,i.jsx)("div",{className:"d-flex flex-direction-column mt-2",children:(0,i.jsx)(d.P,{reactionGroups:I.reactionGroups,onReact:(e,t)=>{ec?.({commentDatabaseId:I.databaseId,threadId:P,reaction:e,viewerHasReacted:t,onCompleted:()=>{k?.(P)},onError:()=>{et(!1),q({type:"error",message:"Failed to react to comment"})}})},canReact:I.viewerCanReact})}):!z&&(0,i.jsx)(x.A,{sx:{display:"flex",flexDirection:"column",mt:3},children:em?(0,i.jsx)(b.Suspense,{fallback:(0,i.jsx)(c.e,{}),children:(0,i.jsx)(m.ReactionViewerRelayQueryComponent,{id:I.id})}):(0,i.jsx)(m.ReactionViewerRelay,{reactionGroups:I,subjectId:I.id})}),eL&&F&&(0,i.jsx)(V,{comment:I,commentBodyRef:eh,commentingImplementation:D,filePath:L,isOutdated:T,isThreadResolved:A,databaseId:I.databaseId,suggestedChangesConfig:H,applySuggestedChangesValidationData:F,subject:M,viewerData:G})]})})]})]})}try{W.displayName||(W.displayName="ReviewThreadComment")}catch{}},78869:(e,t,n)=>{n.d(t,{i:()=>s});var i=n(74848),o=n(67220),r=n(73974),a=n(75177),l=n(52464);function s({subject:e,sx:t,tabSize:n,hideHeaderDetails:s,diffTableSx:d}){if(!e?.diffLines||e?.diffLines.length<1)return null;let c=(0,o.c7)(e.diffLines);return(0,i.jsxs)(a.A,{sx:{m:3,border:0,borderBottomWidth:6,borderStyle:"solid",borderColor:"border.muted",borderBottomLeftRadius:2,borderBottomRightRadius:2,...t},children:[!s&&(0,i.jsx)(a.A,{sx:{borderWidth:1,borderStyle:"solid",borderTopLeftRadius:2,borderTopRightRadius:2,borderColor:"border.muted",color:"fg.muted",px:2,py:1},children:(0,i.jsxs)(l.A,{sx:{fontSize:0,color:"fg.muted"},children:["Line"," ",(0,r.Ah)({originalStartLine:e.originalStartLine,originalEndLine:e.originalEndLine,startDiffSide:e.startDiffSide,endDiffSide:e.endDiffSide}),", commit ",(0,i.jsx)("code",{children:e.pullRequestCommit?.commit.abbreviatedOid})]})}),(0,i.jsx)(r.l4,{lineWidth:c,lines:e.diffLines,tabSize:n,sx:d})]})}try{s.displayName||(s.displayName="StaticUnifiedDiffPreview")}catch{}},56126:(e,t,n)=>{n.d(t,{W:()=>l,j:()=>a});var i=n(74848),o=n(96540);let r=(0,o.createContext)({});function a({children:e}){let[t,n]=(0,o.useState)(!1),a=(0,o.useMemo)(()=>({isDialogOpen:t,setIsDialogOpen:n}),[t,n]);return(0,i.jsx)(r.Provider,{value:a,children:e})}let l=()=>(0,o.useContext)(r);try{r.displayName||(r.displayName="DialogStateContext")}catch{}try{a.displayName||(a.displayName="DialogStateProvider")}catch{}},42242:(e,t,n)=>{n.d(t,{f:()=>a,q:()=>l});var i=n(74848),o=n(96540);let r=(0,o.createContext)({isInDialogMode:!1,enableInlineCommentDialogMode:()=>{},disableInlineCommentDialogMode:()=>{}});function a({enableDiffGridMode:e,children:t}){let[n,a]=(0,o.useState)(!1),l=(0,o.useCallback)(()=>{a(!0),e?.(!1)},[e]),s=(0,o.useCallback)(()=>{a(!1),e?.(!0)},[e]),d=(0,o.useMemo)(()=>({isInDialogMode:n,enableInlineCommentDialogMode:l,disableInlineCommentDialogMode:s}),[n,l,s]);return(0,i.jsx)(r.Provider,{value:d,children:t})}let l=()=>(0,o.useContext)(r);try{r.displayName||(r.displayName="InlineCommentDialogModeContext")}catch{}try{a.displayName||(a.displayName="InlineCommentDialogModeProvider")}catch{}},26514:(e,t,n)=>{n.d(t,{T:()=>h});var i=n(74848),o=n(45996),r=n(38621),a=n(87330),l=n(96540),s=n(34164),d=n(42522),c=n(13080),m=n(76797);let u={tooltip:"CopyToClipboardButton-module__tooltip--Dq1IB"};function h({icon:e=r.CopyIcon,size:t="medium",onCopy:n,textToCopy:h,tooltipProps:f,variant:g="invisible",ariaLabel:p,className:x,disabled:y,...b}){let[C,j]=l.useState(!1),v=(0,o.A)(),N=p??`Copy "${h}" to clipboard`,S=C?"Copied!":N,T={size:t,variant:g,onClick:()=>{j(!0),(0,c.i)("Copied!"),(0,m.D)(h),n?.(),setTimeout(()=>v()&&j(!1),2e3)},icon:C?r.CheckIcon:e,className:(0,s.$)(C?"color-fg-success":void 0,x),...b},A=(0,l.useId)();return y?(0,i.jsx)(a.K,{...T,"aria-label":N,disabled:!0}):(0,i.jsx)(d.m,{text:S,"aria-label":N,type:"label",id:A,"aria-hidden":!0,...f,className:(0,s.$)(u.tooltip,f?.className),children:(0,i.jsx)(a.K,{...T,"aria-labelledby":A})})}try{h.displayName||(h.displayName="CopyToClipboardButton")}catch{}},20174:(e,t,n)=>{n.d(t,{u:()=>l});var i=n(74848),o=n(21728),r=n(34164);let a={diffSquare:"DiffSquares-module__diffSquare--h5kjy",addition:"DiffSquares-module__addition--jeNtt",deletion:"DiffSquares-module__deletion--hKV3q",neutral:"DiffSquares-module__neutral--VlyoP"};function l(e){let t,n;let r=(0,o.c)(4),{squares:a}=e;return r[0]!==a?(t=a.map(s),r[0]=a,r[1]=t):t=r[1],r[2]!==t?(n=(0,i.jsx)("div",{className:"d-flex",children:t}),r[2]=t,r[3]=n):n=r[3],n}function s(e,t){return(0,i.jsx)("div",{"data-testid":`${e} diffstat`,className:(0,r.$)(a.diffSquare,a[e])},t)}try{l.displayName||(l.displayName="DiffSquares")}catch{}},69710:(e,t,n)=>{n.d(t,{z:()=>l});var i=n(74848),o=n(21728),r=n(20174);let a={addition:"addition",deletion:"deletion",neutral:"neutral"};function l(e){let t,n,l,s,d,c,m;let u=(0,o.c)(20),{linesAdded:h,linesDeleted:f,linesChanged:g}=e,p=void 0===h?0:h,x=void 0===f?0:f,y=void 0===g?0:g;if(!p&&!x&&!y||0===y)return null;if(u[0]!==p||u[1]!==y||u[2]!==x){let{greenSquares:e,redSquares:n,graySquares:i}=function(e,t,n){let i=n>5?5/n:1,o=Math.floor(e*i),r=Math.floor(t*i);return{greenSquares:o,redSquares:r,graySquares:5-o-r}}(p,x,y);t=[...Array(e).fill(a.addition),...Array(n).fill(a.deletion),...Array(i).fill(a.neutral)],u[0]=p,u[1]=y,u[2]=x,u[3]=t}else t=u[3];let b=t;return u[4]!==p?(n=p>0&&(0,i.jsxs)("span",{"aria-hidden":"true",className:"f6 text-bold fgColor-success",children:["+",p.toLocaleString()]}),u[4]=p,u[5]=n):n=u[5],u[6]!==x?(l=x>0&&(0,i.jsxs)("span",{"aria-hidden":"true",className:"f6 text-bold fgColor-danger",children:["-",x.toLocaleString()]}),u[6]=x,u[7]=l):l=u[7],u[8]!==p||u[9]!==x?(s=function({linesAdded:e,linesDeleted:t}){return`Lines changed: ${e} ${1===e?"addition":"additions"} & ${t} ${1===t?"deletion":"deletions"}`}({linesAdded:p,linesDeleted:x}),u[8]=p,u[9]=x,u[10]=s):s=u[10],u[11]!==s?(d=(0,i.jsx)("span",{className:"sr-only",children:s}),u[11]=s,u[12]=d):d=u[12],u[13]!==b?(c=(0,i.jsx)(r.u,{squares:b}),u[13]=b,u[14]=c):c=u[14],u[15]!==n||u[16]!==l||u[17]!==d||u[18]!==c?(m=(0,i.jsxs)("div",{className:"d-flex flex-items-center gap-1 pl-1",children:[n,l,d,c]}),u[15]=n,u[16]=l,u[17]=d,u[18]=c,u[19]=m):m=u[19],m}try{l.displayName||(l.displayName="DiffStats")}catch{}},16497:(e,t,n)=>{n.d(t,{e:()=>r});var i=n(74848),o=n(34407);function r(){return(0,i.jsx)("div",{className:"d-flex flex-wrap gap-1",children:(0,i.jsx)(o.O,{variant:"elliptical",height:"28px",width:"28px"})})}try{r.displayName||(r.displayName="ReactionViewerLoading")}catch{}}}]);
//# sourceMappingURL=ui_packages_conversations_conversations_ts-ui_packages_copy-to-clipboard_CopyToClipboardButton_tsx-93686ce2c77e.js.map